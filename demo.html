<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TTS Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .wrapper {
            width: 100%;
            height: 100%;
        }

        .box {
            position: relative;
            width: 90%;
            /* æ”¹ä¸ºç™¾åˆ†æ¯”å®½åº¦ */
            max-width: 800px;
            /* ä¿è¯å¤§å±ä¸Šä¸è¶…è¿‡800px */
            margin: 0 auto;
            padding: 16px;
            border-left: 1px solid #ccc;
            border-right: 1px solid #ccc;
        }

        .box p {
            font-size: 1rem;
            /* ä»¥ rem ä¸ºå•ä½ */
            line-height: 1.5;
            margin-bottom: 24px;
            text-indent: 2em;
        }

        /* audio æŒ‰é’®ä¿æŒä¸å˜ */
        .audio {
            position: absolute;
            top: 0;
            left: 0;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 1px solid #f2f2f2;
            background-color: #f2f2f2;
            z-index: 2;
            cursor: pointer;
        }

        .audio:hover {
            background-color: #e0e0e0;
            border-color: #bdbdbd;
        }

        .audio.active {
            background-color: #4caf50;
            border-color: #388e3c;
        }

        /* æ’­æ”¾é¢æ¿ */
        .player-control {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            /* åœ¨å°å±å¹•ä¸‹è‡ªåŠ¨é€‚é… */
            max-width: 340px;
            /* å¤§å±æ—¶æœ€å¤š340px */
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 12px;
            z-index: 999;
            font-family: sans-serif;
            display: none;
        }

        /* æ ‡é¢˜æ  */
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 8px;
        }

        /* æŒ‰é’®å¸ƒå±€ */
        .player-buttons {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            /* å°å±å¹•è‡ªåŠ¨æ¢è¡Œ */
            margin: 10px 0;
            gap: 8px;
        }

        .player-buttons button {
            flex: 1;
            min-width: 80px;
            /* ä¿è¯æŒ‰é’®ä¸å¤ªçª„ */
            padding: 10px 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #f0f0f0;
            font-size: 16px;
            transition: background 0.2s;
        }

        .player-buttons button:hover {
            background: #e0e0e0;
        }

        /* å‚æ•°é€‰é¡¹ */
        .player-options {
            margin-top: 10px;
        }

        .player-options label {
            font-size: 14px;
            margin-right: 6px;
        }

        .player-options select,
        .player-options input {
            width: 100%;
            padding: 6px;
            margin: 6px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        /* ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 480px) {
            .box p {
                font-size: 14px;
                /* æ‰‹æœºå­—ä½“ç¨å¾®ç¼©å° */
            }

            .player-buttons button {
                min-width: 60px;
                font-size: 14px;
                padding: 8px 0;
            }
        }
    </style>
    <script>
        (function () {
            function setRemUnit() {
                const docEl = document.documentElement;
                const width = docEl.clientWidth;
                const baseWidth = 375; // è®¾è®¡ç¨¿å®½åº¦
                const baseFontSize = 16; // åŸºå‡†å­—ä½“

                // è®¡ç®—ç¼©æ”¾åçš„ font-size
                let rem = (width / baseWidth) * baseFontSize;

                // é™åˆ¶æœ€å¤§å€¼ï¼ˆé¿å… PC å±å¹•å¤ªå¤§ï¼‰
                if (rem > baseFontSize) {
                    rem = baseFontSize;
                }

                docEl.style.fontSize = rem + 'px';
            }

            setRemUnit();
            window.addEventListener('resize', setRemUnit);
            window.addEventListener('pageshow', function (e) {
                if (e.persisted) setRemUnit();
            });
        })();
    </script>

</head>

<body>
    <div class="wrapper">
        <div class="box">
            <p>
                æ— çº¸åŒ–å­¦ä¹ ï¼Œæ­£æˆä¸ºå¤§å­¦æ ¡å›­é‡Œçš„å¸¸æ€ã€‚ç”¨ä¸€å°å¹³æ¿å–ä»£åšé‡çš„ä¹¦æœ¬å’Œè®²ä¹‰ï¼Œä¸Šè¯¾æ—¶ç›´æ¥åœ¨è¯¾ä»¶ä¸Šåœˆç”»é‡ç‚¹ï¼Œæ‰€æœ‰ç§‘ç›®ç¬”è®°éƒ½èƒ½è½»æ¾æ•´ç†ã€ä¸€é”®æœç´¢â€”â€”è¿™ç§è½»ä¾¿é«˜æ•ˆçš„å­¦ä¹ æ–¹å¼ï¼Œè¶Šæ¥è¶Šå—åˆ°å­¦ç”Ÿä»¬çš„é’çã€‚è¯´åˆ°è¿™ï¼Œè®¸å¤šäººç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„ï¼Œä¾¿æ˜¯â€œiPad
                + Apple Pencilâ€è¿™å¥—â€œæ¯•ä¸šçº§â€è£…å¤‡ã€‚ä¸å¯å¦è®¤ï¼ŒiPad
                ä½“éªŒç¡®å®å‡ºè‰²ï¼Œä½†é«˜æ˜‚çš„ä»·æ ¼ä¹Ÿæˆä¸ºè¿ˆå‘æ— çº¸åŒ–å­¦ä¹ é“è·¯ä¸Šçš„ç¬¬ä¸€é“é—¨æ§›ã€‚
            </p>
            <p>
                Note: Docker is optional, but it's essential for running the local
                database and Redis services. If you're planning to run the frontend or
                want to contribute to frontend features, you can skip the Docker
                setup. If you have followed the steps below in Setup, you're all set
                to go!
            </p>
            <p>
                We welcome contributions! While we're actively developing and
                refactoring certain areas, there are plenty of opportunities to
                contribute effectively.
            </p>
            <p>
                Focus areas: Timeline functionality, project management, performance,
                bug fixes, and UI improvements outside the preview panel.
            </p>
            <p>
                webå¼€å‘åŸºæœ¬ä¸Šä¸ç”¨åŸºç¡€ç»„ä»¶ï¼Œéƒ½æ˜¯æ‰¾ä¸€ä¸ªä¸‰æ–¹uiåº“ï¼Œå…¨å¥—ç»„ä»¶éƒ½åŒ…å«ã€‚é‚£æ˜¯å› ä¸ºhtmlçš„åŸºç¡€ç»„ä»¶é»˜è®¤æ ·å¼ä¸é€‚é…æ‰‹æœºé£æ ¼ã€‚ä½†uni-appä½“ç³»ä¸æ˜¯è¿™æ ·ï¼Œå†…ç½®ç»„ä»¶å°±æ˜¯ä¸ºæ‰‹æœºä¼˜åŒ–çš„ã€‚
            </p>
            <p>
                ä½†å†…ç½®ç»„ä»¶åªèƒ½æ»¡è¶³åŸºç¡€éœ€æ±‚ï¼Œæ›´å¤šåœºæ™¯ï¼Œéœ€è¦æ‰©å±•ç»„ä»¶ã€‚æ‰©å±•ç»„ä»¶æ˜¯åŸºäºå†…ç½®ç»„ä»¶çš„äºŒæ¬¡å°è£…ï¼Œä»æ€§èƒ½ä¸Šæ¥è®²ï¼Œæ‰©å±•ç»„ä»¶çš„æ€§èƒ½ç•¥ä½äºå†…ç½®ç»„ä»¶ï¼Œæ‰€ä»¥å¼€å‘è€…åˆ‡å‹¿æŠ›å¼ƒå†…ç½®ç»„ä»¶ï¼Œç›´æ¥å…¨å¥—ç”¨ä¸‰æ–¹UIç»„ä»¶åº“ã€‚
            </p>
            <p>
                ä¼—å¤šæ‰©å±•ç»„ä»¶å¦‚ä½•é€‰æ‹©ï¼Ÿæˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥šç»„ä»¶çš„åˆ†ç±»ã€‚ç»„ä»¶åˆ†2å¤§ç±»ï¼š1ã€vueç»„ä»¶ï¼ˆæ–‡ä»¶åç¼€ä¸ºvueï¼‰ï¼›2ã€å°ç¨‹åºè‡ªå®šä¹‰ç»„ä»¶ï¼ˆæ–‡ä»¶åç¼€ä¸ºwxmlæˆ–å…¶ä»–å°ç¨‹åºå¹³å°ç‰¹æœ‰åç¼€åç§°ï¼‰
            </p>
            <p>
                åŒæ ·æ˜¯vueç»„ä»¶ï¼Œonly for
                webçš„å’Œå…¨ç«¯çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¼ ç»Ÿçš„vueç»„ä»¶ï¼Œæ¯”å¦‚elementUIï¼Œéƒ½æ˜¯only for
                webçš„ï¼Œé‡Œé¢æœ‰å¤§é‡domå’Œwindowå¯¹è±¡æ“ä½œã€‚ä½†å°ç¨‹åºå’ŒAppæ˜¯æ²¡æœ‰domè¿™äº›apiçš„ï¼Œè‡ªç„¶æ— æ³•è·¨ç«¯ä½¿ç”¨ã€‚æƒ³è¦è·¨ç«¯ï¼Œå…¶å®ä¹Ÿä¸éš¾ï¼Œåšä¸€å¥—æ— domçš„vueç»„ä»¶å³å¯ã€‚å®˜æ–¹çš„uni-uiå³æ˜¯å¦‚æ­¤ã€‚è¿˜æœ‰ä¼—å¤šå¼€å‘è€…åœ¨æ’ä»¶å¸‚åœºæäº¤äº†æ›´å¤šè¿™ç§ç±»å‹çš„åº“ã€‚
            </p>
            <p>
                DCloudå®˜æ–¹å‡ºäº†ä¸€å¥—æ‰©å±•ç»„ä»¶ï¼Œå³uni-uiè¿™äº›æ‰©å±•ç»„ä»¶æ”¯æŒå•ä¸ªç»„ä»¶ä»æ’ä»¶å¸‚åœºä¸‹è½½ï¼Œä¹Ÿæ”¯æŒnpmå¼•å…¥uni
                uiï¼Œå½“ç„¶æ›´æ–¹ä¾¿çš„æ˜¯åœ¨HBuilderXæ–°å»ºé¡¹ç›®æ—¶ç›´æ¥é€‰æ‹©uni uié¡¹ç›®æ¨¡æ¿uni
                uiæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š
            </p>
            <p>
                ä¼˜åŒ–é€»è¾‘å±‚å’Œè§†å›¾å±‚çš„é€šä¿¡æŠ˜æŸï¼šéH5ç«¯çš„å„ä¸ªå¹³å°ï¼ŒåŒ…æ‹¬Appå’Œå„ç§å°ç¨‹åºï¼Œå…¶é€»è¾‘å±‚å’Œè§†å›¾å±‚æ˜¯åˆ†ç¦»çš„ï¼Œä¸¤å±‚ä¹‹é—´é€šä¿¡äº¤äº’ä¼šæœ‰æŠ˜æŸï¼Œå¯¼è‡´è¯¸å¦‚è·Ÿæ‰‹æ»‘åŠ¨ä¸æµç•…ã€‚uni
                uiåœ¨åº•å±‚ä¼šåˆ©ç”¨wxsç­‰æŠ€æœ¯ï¼ŒæŠŠé€‚å½“çš„jsä»£ç è¿è¡Œåœ¨è§†å›¾å±‚ï¼Œå‡å°‘é€šä¿¡æŠ˜æŸï¼Œä¿è¯è¯¸å¦‚swiperActionå·¦æ»‘èœå•ç­‰è·Ÿæ‰‹æ“ä½œæµç•…é¡ºæ»‘
            </p>
            <p>
                èƒŒæ™¯åœæ­¢ï¼šå¾ˆå¤šuiç»„ä»¶æ˜¯ä¼šä¸€ç›´åŠ¨çš„ï¼Œæ¯”å¦‚è½®æ’­å›¾ã€è·‘é©¬ç¯ã€‚å³ä¾¿è¿™ä¸ªçª—ä½“è¢«æ–°çª—ä½“æŒ¡ä½ï¼Œå®ƒåœ¨èƒŒæ™¯å±‚ä»ç„¶åœ¨æ¶ˆè€—ç€ç¡¬ä»¶èµ„æºã€‚åœ¨Androidçš„webviewç‰ˆæœ¬ä¸ºchrome66ä»¥ä¸Šï¼ŒèƒŒæ™¯æ“ä½œuiä¼šå¼•å‘å¾ˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œé€ æˆå‰å°ç•Œé¢æ˜æ˜¾å¡é¡¿ã€‚è€Œuni
                uiçš„ç»„ä»¶ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­è‡ªå·±çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œåœ¨ç»„ä»¶ä¸å†å¯è§æ—¶ï¼Œä¸ä¼šå†åšåŠ¨ç”»æ¶ˆè€—ç¡¬ä»¶èµ„æºã€‚
            </p>
            <p>
                èƒŒæ™¯åœæ­¢ï¼šå¾ˆå¤šuiç»„ä»¶æ˜¯ä¼šä¸€ç›´åŠ¨çš„ï¼Œæ¯”å¦‚è½®æ’­å›¾ã€è·‘é©¬ç¯ã€‚å³ä¾¿è¿™ä¸ªçª—ä½“è¢«æ–°çª—ä½“æŒ¡ä½ï¼Œå®ƒåœ¨èƒŒæ™¯å±‚ä»ç„¶åœ¨æ¶ˆè€—ç€ç¡¬ä»¶èµ„æºã€‚åœ¨Androidçš„webviewç‰ˆæœ¬ä¸ºchrome66ä»¥ä¸Šï¼ŒèƒŒæ™¯æ“ä½œuiä¼šå¼•å‘å¾ˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œé€ æˆå‰å°ç•Œé¢æ˜æ˜¾å¡é¡¿ã€‚è€Œuni
                uiçš„ç»„ä»¶ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­è‡ªå·±çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œåœ¨ç»„ä»¶ä¸å†å¯è§æ—¶ï¼Œä¸ä¼šå†åšåŠ¨ç”»æ¶ˆè€—ç¡¬ä»¶èµ„æºã€‚
            </p>
            <p>
                èƒŒæ™¯åœæ­¢ï¼šå¾ˆå¤šuiç»„ä»¶æ˜¯ä¼šä¸€ç›´åŠ¨çš„ï¼Œæ¯”å¦‚è½®æ’­å›¾ã€è·‘é©¬ç¯ã€‚å³ä¾¿è¿™ä¸ªçª—ä½“è¢«æ–°çª—ä½“æŒ¡ä½ï¼Œå®ƒåœ¨èƒŒæ™¯å±‚ä»ç„¶åœ¨æ¶ˆè€—ç€ç¡¬ä»¶èµ„æºã€‚åœ¨Androidçš„webviewç‰ˆæœ¬ä¸ºchrome66ä»¥ä¸Šï¼ŒèƒŒæ™¯æ“ä½œuiä¼šå¼•å‘å¾ˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œé€ æˆå‰å°ç•Œé¢æ˜æ˜¾å¡é¡¿ã€‚è€Œuni
                uiçš„ç»„ä»¶ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­è‡ªå·±çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œåœ¨ç»„ä»¶ä¸å†å¯è§æ—¶ï¼Œä¸ä¼šå†åšåŠ¨ç”»æ¶ˆè€—ç¡¬ä»¶èµ„æºã€‚
            </p>
        </div>
        <div class="player-control" id="playerControl">
            <div class="player-header">
                <span>è¯­éŸ³æ’­æ”¾æ§åˆ¶</span>
                <button id="exitBtn"
                    style="background:#ff4d4f;color:#fff;padding:2px 8px;border:none;border-radius:6px;">é€€å‡º</button>
            </div>

            <div class="player-buttons">
                <button id="prevBtn">â®ï¸ ä¸Šä¸€å¥</button>
                <button id="playPauseBtn">â¸ï¸</button>
                <button id="nextBtn">ä¸‹ä¸€å¥ â­ï¸</button>
            </div>

            <div class="player-options">
                <label for="rateSelect">è¯­é€Ÿï¼š</label>
                <input type="range" id="rateSelect" min="0.5" max="2" step="0.1" value="1">

                <label for="voiceSelect">å£°éŸ³ï¼š</label>
                <select id="voiceSelect"></select>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const box = document.querySelector(".box");
            const paragraphs = box.querySelectorAll("p");
            const audios = [];
            const boxRect = box.getBoundingClientRect();

            // æ’­æ”¾é¢æ¿
            const playerControl = document.getElementById("playerControl");
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");
            const playPauseBtn = document.getElementById("playPauseBtn");
            const exitBtn = document.getElementById("exitBtn");
            const rateSelect = document.getElementById("rateSelect");
            const voiceSelect = document.getElementById("voiceSelect");

            let voices = [];
            let currentUtterance = null;
            let currentIndex = null;
            let isPaused = false;
            let rate = 1;

            // åˆ›å»º audio æŒ‰é’®å¹¶æ”¾ç½®
            paragraphs.forEach((p, index) => {
                const pRect = p.getBoundingClientRect();
                const top = pRect.top - boxRect.top;
                const left = -16;

                const audio = document.createElement("div");
                audio.classList.add("audio");
                audio.dataset.index = index;
                audio.style.top = `${top}px`;
                audio.style.left = `${left}px`;
                box.appendChild(audio);

                audios.push(audio);
            });

            function loadVoices() {
                voices = speechSynthesis.getVoices();
                voiceSelect.innerHTML = "";
                voices.forEach((voice, i) => {
                    const option = document.createElement("option");
                    option.value = i;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    voiceSelect.appendChild(option);
                });
            }
            loadVoices();
            speechSynthesis.onvoiceschanged = loadVoices;

            function playParagraph(index) {
                if (index < 0 || index >= paragraphs.length) return;

                speechSynthesis.cancel();
                audios.forEach(a => a.classList.remove("active"));

                currentIndex = index;
                const text = paragraphs[index].innerText;

                audios[index].classList.add("active");

                const utterance = new SpeechSynthesisUtterance(text);
                currentUtterance = utterance;
                utterance.rate = rate;

                const selectedVoice = voices[voiceSelect.value];
                if (selectedVoice) utterance.voice = selectedVoice;

                utterance.onend = () => {
                    if (!isPaused) {
                        audios[index].classList.remove("active");
                        playParagraph(index + 1);
                    }
                };

                speechSynthesis.speak(utterance);

                playerControl.style.display = "block";
                playPauseBtn.textContent = "â¸ï¸"; // æ’­æ”¾æ—¶æ˜¾ç¤ºæš‚åœå›¾æ ‡
                isPaused = false;
            }

            audios.forEach(audio => {
                audio.addEventListener("click", () => {
                    const index = parseInt(audio.dataset.index);
                    playParagraph(index);
                });
            });

            // æ§åˆ¶æŒ‰é’®é€»è¾‘
            prevBtn.addEventListener("click", () => {
                if (currentIndex !== null) {
                    playParagraph(currentIndex - 1);
                }
            });

            nextBtn.addEventListener("click", () => {
                if (currentIndex !== null) {
                    playParagraph(currentIndex + 1);
                }
            });

            playPauseBtn.addEventListener("click", () => {
                if (!currentUtterance) return;

                if (isPaused) {
                    playParagraph(currentIndex); // é‡æ–°å¼€å§‹å½“å‰æ®µ
                    playPauseBtn.textContent = "â¸ï¸"; // åˆ‡æ¢ä¸ºæš‚åœæŒ‰é’®
                    isPaused = false;
                } else {
                    speechSynthesis.cancel(); // åœæ­¢æ’­æ”¾
                    playPauseBtn.textContent = "â–¶ï¸"; // åˆ‡æ¢ä¸ºæ’­æ”¾æŒ‰é’®
                    isPaused = true;
                }
            });

            rateSelect.addEventListener("input", () => {
                rate = parseFloat(rateSelect.value);
                if (currentUtterance) {
                    speechSynthesis.cancel();
                    playParagraph(currentIndex);
                }
            });

            voiceSelect.addEventListener("change", () => {
                if (currentUtterance) {
                    speechSynthesis.cancel();
                    playParagraph(currentIndex);
                }
            });

            exitBtn.addEventListener("click", () => {
                speechSynthesis.cancel();
                currentUtterance = null;
                currentIndex = null;
                audios.forEach(a => a.classList.remove("active"));
                playerControl.style.display = "none";
            });
        });
    </script>
</body>

</html>